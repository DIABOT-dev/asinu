# ASINU LIFE TREE DOCS
**Phi√™n b·∫£n 1.0 ‚Äì T√†i li·ªáu t·ªïng h·ª£p cho Nh√† ƒë·∫ßu t∆∞, Ng∆∞·ªùi b·ªánh v√† ƒê·ªôi k·ªπ thu·∫≠t**  
*(D·ª± √°n Asinu / C√¢y S·ª± S·ªëng ‚Äì Life Tree System)*  

---

## üå≥ PH·∫¶N I. C√ÇU CHUY·ªÜN S·∫¢N PH·∫®M & TRI·∫æT L√ù

### 1. Kh√°i ni·ªám t·ªïng quan

**Life Tree ‚Äì C√¢y S·ª± S·ªëng** l√† tr√°i tim c·∫£m x√∫c c·ªßa Asinu ‚Äì n∆°i m·ªói h√†nh ƒë·ªông t·ªët cho c∆° th·ªÉ ƒë∆∞·ª£c nh√¨n th·∫•y, ch·∫°m th·∫•y, v√† t·ª± h√†o c·∫£m nh·∫≠n.

Ng∆∞·ªùi d√πng (d√π l√† ng∆∞·ªùi b·ªánh hay ng∆∞·ªùi kh·ªèe) kh√¥ng ch·ªâ ghi ch√©p s·ª©c kh·ªèe ‚Äì h·ªç ƒëang **nu√¥i d∆∞·ª°ng m·ªôt sinh th·ªÉ s·ªëng ƒë·∫°i di·ªán cho ch√≠nh c∆° th·ªÉ m√¨nh.**  
C√¢y s·∫Ω l·ªõn l√™n t·ª´ng ng√†y theo nƒÉng l∆∞·ª£ng E_day (Energy of the Day), n·ªü hoa, ra qu·∫£, v√† tr·ªü th√†nh **‚ÄúC√¢y linh h·ªìn‚Äù** khi ng∆∞·ªùi d√πng duy tr√¨ ƒë∆∞·ª£c th√≥i quen t·ªët l√¢u d√†i.

---

### 2. Tri·∫øt l√Ω thi·∫øt k·∫ø c·∫£m x√∫c (dopamine loop)

| H√†nh ƒë·ªông | Ph·∫£n h·ªìi t·ª©c th√¨ | C·∫£m x√∫c g·ª£i ra |
|------------|-----------------|----------------|
| U·ªëng n∆∞·ªõc, h√≠t th·ªü, ƒëi b·ªô... | L√° rung, √°nh s√°ng nh·∫π, √¢m thanh ‚Äúting‚Äù | Vui nh·ªè |
| ƒê·∫°t m·ªëc ng√†y | C√¢y l·ªõn h∆°n, √°nh s√°ng m·∫°nh h∆°n | T·ª± h√†o |
| Ho√†n th√†nh 7 ng√†y li√™n t·ª•c | Hoa n·ªü / Qu·∫£ xu·∫•t hi·ªán | H·∫°nh ph√∫c, Dopamine peak |
| C√¢y l√™n c·∫•p m·ªõi | Confetti, l·ªùi ch√∫c t·ª´ Anora | Th√†nh t·ª±u |
| M·ªü ph·∫ßn th∆∞·ªüng | Qu√† th·∫≠t ho·∫∑c item c√¢y | Duy tr√¨ v√≤ng l·∫∑p |

‚Üí **Nguy√™n l√Ω dopamine t·ª± nhi√™n:** ‚ÄúH√†nh ƒë·ªông ‚Üí Ph·∫£n h·ªìi ‚Üí Ph·∫ßn th∆∞·ªüng ‚Üí Mong ƒë·ª£i ti·∫øp theo.‚Äù

---

### 3. M√¥ h√¨nh ng∆∞·ªùi d√πng: Free / Premium / Family

| H·∫°ng | D√†nh cho | Nhi·ªám v·ª• kh·∫£ d·ª•ng | ƒêi·ªÉm t·ªëi ƒëa/ng√†y | Thi·∫øt b·ªã c·∫ßn |
|------|-----------|-------------------|------------------|--------------|
| **Free** | Ng∆∞·ªùi d√πng m·ªõi, ch∆∞a c√≥ thi·∫øt b·ªã | N∆∞·ªõc u·ªëng, c·∫£m x√∫c, h√≠t th·ªü, thu·ªëc, nh·∫≠p s·ªë ƒëo | 30‚Äì50 | Kh√¥ng b·∫Øt bu·ªôc |
| **Premium** | Ng∆∞·ªùi d√πng tr·∫£ ph√≠ 1 ng∆∞·ªùi | Th√™m b∆∞·ªõc ch√¢n, gi·∫•c ng·ªß, b·ªØa ƒÉn AI, nh·ªãp tim | 70‚Äì100 | C√≥ ƒë·ªìng h·ªì ho·∫∑c Google Fit |
| **Family** | G√≥i gia ƒë√¨nh 3‚Äì5 ng∆∞·ªùi | T·∫•t c·∫£ nhi·ªám v·ª• + bonus nh√≥m | 100‚Äì130 | K·∫øt n·ªëi BLE / Family sync |

---

### 4. H·ªá th·ªëng t√≠nh ƒëi·ªÉm (E_day)

**E_day (0‚Äì100)** l√† t·ªïng nƒÉng l∆∞·ª£ng ng√†y, t√≠nh t·ª´ 4 tr·ª• s·ª©c kh·ªèe:  

| Tr·ª• | Ngu·ªìn d·ªØ li·ªáu | Tr·ªçng s·ªë |
|------|---------------|-----------|
| V·∫≠n ƒë·ªông | B∆∞·ªõc, calo, nh·ªãp tim | 35% |
| Gi·∫•c ng·ªß | T·ªïng th·ªùi gian & ch·∫•t l∆∞·ª£ng | 25% |
| Dinh d∆∞·ª°ng | U·ªëng n∆∞·ªõc, b·ªØa ƒÉn | 20% |
| Tinh th·∫ßn | C·∫£m x√∫c, thi·ªÅn, h√≠t th·ªü | 20% |

---

### 5. M·ªëc seeding ‚Äì nguy√™n l√Ω ‚Äúgame online‚Äù
> ‚ÄúC∆° m√† ƒë·ªïi ƒëi·ªÉm l√†m g√¨ nh·ªõ seeding.‚Äù ‚Äì Anh Tu·∫•n  

Ng∆∞·ªùi d√πng ƒë∆∞·ª£c d·∫´n d·∫Øt b·∫±ng c√°c **m·ªëc c·∫£m x√∫c tƒÉng d·∫ßn**:  
3 ƒëi·ªÉm ‚Üí 10 ƒëi·ªÉm ‚Üí 80 ƒëi·ªÉm ‚Üí 100 ƒëi·ªÉm ‚Üí 200 ƒëi·ªÉm ‚Üí 350 ‚Üí 500‚Ä¶  

| M·ªëc | Hi·ªÉn th·ªã g·ª£i √Ω | Hi·ªáu ·ª©ng / Th∆∞·ªüng |
|------|-----------------|------------------|
| 3 | ‚ÄúB·∫°n c√≥ th·ªÉ ƒë·ªïi sticker ƒë·∫ßu ti√™n!‚Äù | Popup nh·ªè, c√¢y s√°ng |
| 10 | ‚ÄúC·ªë th√™m ch√∫t ƒë·ªÉ ƒë·∫°t m·ªëc 80 nh√©!‚Äù | C√¢y rung |
| 80 | ‚ÄúC√≤n 20 ƒëi·ªÉm n·ªØa ƒë·ªÉ ƒë·ªïi voucher n∆∞·ªõc kho√°ng!‚Äù | Ladder CTA |
| 100 | ‚ÄúM·ªü qu√† l·ªõn ƒë·∫ßu ti√™n üéÅ‚Äù | Voucher / Item c√¢y |
| 200+ | ‚ÄúB·∫°n ƒë√£ v√†o top 1% ng∆∞·ªùi chƒÉm c√¢y nh·∫•t tu·∫ßn!‚Äù | Badge ƒë·∫∑c bi·ªát |

‚Üí H·ªá th·ªëng n√†y t·∫°o **c·∫£m gi√°c b·∫•t t·∫≠n ‚Äì unstoppable** nh∆∞ trong game online.

---

### 6. H√¨nh ·∫£nh minh h·ªça
![Life Tree Render](sandbox:/mnt/data/ChatGPT%20Image%2009_15_07%2012%20thg%2011,%202025.png)
![3D Tree Reference](sandbox:/mnt/data/c16383ef-e948-442a-b290-7cff380f27d2.png)

---

### 7. Chu tr√¨nh ph√°t tri·ªÉn c√¢y (10 c·∫•p ƒë·ªô)

| C·∫•p | T√™n | M√¥ t·∫£ | Hi·ªáu ·ª©ng |
|-----|-----|-------|----------|
| 1 | H·∫°t gi·ªëng | √Ånh s√°ng nh·ªè, h·∫°t rung nh·∫π | ‚ÄúC√¢y c·ªßa b·∫°n v·ª´a ƒë∆∞·ª£c gieo üå±‚Äù |
| 2 | M·∫ßm non | Hai l√° nh·ªè b·∫≠t ra | ‚ÄúM·∫ßm ƒë·∫ßu ti√™n ƒë√£ nh√∫ l√™n!‚Äù |
| 3 | C√¢y con | 4 l√°, cao h∆°n, n·ªÅn s√°ng | √Çm thanh ‚Äúping‚Äù |
| 4 | C√¢y non kh·ªèe | Th√¢n cong nh·∫π, xanh ƒë·∫≠m | C√¢y rung v√† ph√°t s√°ng |
| 5 | C√¢y tr∆∞·ªüng th√†nh | T√°n tr√≤n, b√≥ng l√° | Gi√≥ lay, coin bonus |
| 6 | C√¢y r·ª±c r·ª° | √Ånh s√°ng m·∫°nh h∆°n | Nh·∫°c dopamine |
| 7 | N·ªü hoa üå∏ | Hoa n·ªü nh·∫π | Animation n·ªü hoa |
| 8 | Ra qu·∫£ üçä | Qu·∫£ 3D s√°ng | ‚ÄúC√¢y b·∫°n ƒëang ƒë∆°m tr√°i!‚Äù |
| 9 | T·ªèa s√°ng üí´ | Ph√°t s√°ng lan t·ªèa | N·ªÅn l·∫•p l√°nh |
| 10 | Linh h·ªìn c√¢y üåø | √Ånh s√°ng th·ªü theo nh·ªãp ng∆∞·ªùi d√πng | Anora xu·∫•t hi·ªán ch√∫c m·ª´ng |

---

### 8. T√°c ƒë·ªông v·ªõi ng∆∞·ªùi b·ªánh ti·ªÉu ƒë∆∞·ªùng
- TƒÉng c·∫£m h·ª©ng s·ªëng kh·ªèe h∆°n thay v√¨ s·ª£ b·ªánh.  
- Bi·ªÉu t∆∞·ª£ng c√¢y gi√∫p **th·∫•y r√µ k·∫øt qu·∫£ m·ªói ng√†y**, kh√¥ng c√≤n c·∫£m gi√°c ‚Äúm√¨nh kh√¥ng ti·∫øn tri·ªÉn‚Äù.  
- Gia ƒë√¨nh c√≥ th·ªÉ c√πng tham gia ‚Üí ‚ÄúR·ª´ng Gia ƒê√¨nh Kh·ªèe M·∫°nh‚Äù.  
- G·∫Øn li·ªÅn ch∆∞∆°ng tr√¨nh th∆∞·ªüng qu√† & CSR: ‚ÄúM·ªói c√¢y xanh l√† m·ªôt ng∆∞·ªùi ƒëang s·ªëng t·ªët h∆°n.‚Äù

---

### 9. T√°c ƒë·ªông v·ªõi nh√† ƒë·∫ßu t∆∞
- Retention >35% so v·ªõi app s·ª©c kh·ªèe th√¥ng th∆∞·ªùng.  
- Data h√†nh vi th·∫≠t (b∆∞·ªõc, ng·ªß, dinh d∆∞·ª°ng).  
- D·ªÖ m·ªü r·ªông m√¥ h√¨nh Family, CSR, v√† tokenized rewards.  
- Life Tree l√† **t√†i s·∫£n c·∫£m x√∫c**, kh√¥ng sao ch√©p ƒë∆∞·ª£c b·∫±ng c√¥ng ngh·ªá.

---

## üõ†Ô∏è PH·∫¶N II. THI·∫æT K·∫æ K·ª∏ THU·∫¨T

### 1. Ki·∫øn tr√∫c t·ªïng th·ªÉ

```
[Asinu App] 
   ‚îÇ
   ‚îú‚îÄ‚îÄ [Mission Engine]‚îÄ‚îÄ‚Üí [Points & Rewards Service] 
   ‚îÇ          ‚îÇ
   ‚îÇ          ‚îî‚îÄ‚Üí [Scoring Rules JSON] 
   ‚îÇ
   ‚îú‚îÄ‚îÄ [Metrics Layer]‚îÄ‚îÄ‚Üí [Tree State API]
   ‚îÇ
   ‚îú‚îÄ‚îÄ [User Core DB (Supabase.app_user)]
   ‚îÇ
   ‚îî‚îÄ‚îÄ [UI Layer: Life Tree + Family Forest]
```

- **User ID** ƒë·ªìng nh·∫•t: `app_user.id` (kh√¥ng t·∫°o b·∫£ng ri√™ng).  
- M·ªói ƒëi·ªÉm t√≠ch l≈©y ‚Üí event ‚Üí ledger ‚Üí c·∫≠p nh·∫≠t `metrics_day` v√† `tree_state`.  
- Tree UI ch·ªâ ƒë·ªçc d·ªØ li·ªáu ƒë√£ t·ªïng h·ª£p (no business logic).  

---

### 2. B·∫£ng d·ªØ li·ªáu (Postgres ‚Äì ƒë·ªìng b·ªô user t·ªïng)

```
app_user(id, email, full_name, tier, family_id, created_at)

events(id, user_id FK‚Üíapp_user, type, value, meta_jsonb, issued_at, device_attestation)

points_ledger(id, user_id, delta, reason, source_event_id, idempotency_key, created_at)

balances(user_id PK, balance, updated_at)      -- materialized from ledger
tree_state(user_id PK, total_points, level, e_day, streak, last_update)

catalog_items(id, title, type[voucher|cosmetic|physical], cost, stock, meta, active)
offers(id, item_id, start_at, end_at, segment, min_points, priority)

redemptions(id, user_id, item_id, cost, voucher_code, status, meta, created_at)

rulesets(id, name, jsonb_rules, active)
seeding_rules(id, ladder_json, active)
```

> Ledger l√† ngu·ªìn d·ªØ li·ªáu ch√≠nh. C√°c b·∫£ng `balances` v√† `tree_state` ƒë∆∞·ª£c c·∫≠p nh·∫≠t async (eventually consistent).

---

### 3. JSON m√¥ t·∫£ c·∫£nh Life Tree 3D

```json
{
  "scene_description": "A stylized 3D cartoon tree with a smooth, curved wooden trunk and a glossy canopy of layered, rounded leaves, standing on a small grassy patch with a few spherical bushes. The background is transparent, originally a checkerboard pattern indicating PNG transparency. Two small text overlays are visible: 'generated by AI' at the top-left and 'PSD FILE' at the bottom-right.",
  "characters": [],
  "environment": {
    "setting": "Studio render of a single stylized tree isolated on transparent background",
    "background_elements": ["Checkerboard pattern indicating transparency"],
    "architectural_features": [],
    "weather": "Clear with simulated sunlight",
    "lighting": {
      "type": "artificial, mimicking daylight",
      "sources": [
        "key light from top-left simulating the sun",
        "soft fill light from front-right"
      ],
      "shadows": "soft diffused shadow beneath the tree",
      "reflections": "yes, on glossy leaves"
    },
    "atmosphere": "clean, bright, no fog or haze"
  },
  "objects": [
    {
      "name": "Tree",
      "type": "stylized 3D cartoon tree",
      "position": "foreground, center",
      "appearance": "curving smooth wooden trunk, splitting near the top into two main branches, canopy of layered round glossy leaves in multiple shades of green",
      "materials": ["smooth wood", "glossy plastic-like leaves"],
      "interaction": "no"
    },
    {
      "name": "Grass patch",
      "type": "stylized ground base",
      "position": "foreground, bottom center",
      "appearance": "small circular base with short stylized blades of grass",
      "materials": ["matte plastic"],
      "interaction": "no"
    },
    {
      "name": "Spherical bushes",
      "type": "decorative foliage",
      "position": "foreground, left and right of the tree base",
      "appearance": "small smooth green spheres with a few small leaves",
      "materials": ["matte plastic"],
      "interaction": "no"
    },
    {
      "name": "Ground shadow",
      "type": "soft diffused shadow",
      "position": "foreground, under tree",
      "appearance": "subtle elliptical shadow cast by the tree on the grass base",
      "materials": ["shadow"],
      "interaction": "no"
    }
  ],
  "logos_or_text": [
    {
      "content": "generated by AI",
      "font_family": "rounded sans-serif",
      "font_style": "regular",
      "font_size": "small",
      "color": "#000000",
      "position": "top-left",
      "effects": ["small crown-like icon to the left"]
    },
    {
      "content": "PSD FILE",
      "font_family": "bold sans-serif",
      "font_style": "bold",
      "font_size": "medium",
      "color": "#000000",
      "position": "bottom-right",
      "effects": ["small file/emoji icon to the right"]
    }
  ],
  "mood": "clean, cheerful, playful",
  "dominant_colors": ["#3CB043", "#7ED957", "#E7C9A2", "#2F7D32", "#90EE90", "#8B5A2B"],
  "camera": {
    "perspective": "third-person",
    "angle": "eye-level, slightly tilted front view",
    "position": "centered on tree at mid-distance",
    "focal_length": "standard lens",
    "depth_of_field": "deep, full subject in focus",
    "composition": "central composition, symmetrical balance between trunk and canopy"
  }
}
```

---

### 4. Growth Config JSON (10 c·∫•p ‚Äì editable)

```json
{
  "tree_growth": {
    "levels": [
      { "id": 1, "name": "Seed", "threshold": 0, "animation": "spark" },
      { "id": 2, "name": "Sprout", "threshold": 50, "animation": "leaf_pop" },
      { "id": 3, "name": "Young Tree", "threshold": 150, "animation": "grow_small" },
      { "id": 4, "name": "Healthy Tree", "threshold": 300, "animation": "glow_soft" },
      { "id": 5, "name": "Mature Tree", "threshold": 500, "animation": "wind_sway" },
      { "id": 6, "name": "Vibrant Tree", "threshold": 800, "animation": "light_burst" },
      { "id": 7, "name": "Blooming Tree", "threshold": 1100, "animation": "flower_bloom" },
      { "id": 8, "name": "Fruit Tree", "threshold": 1500, "animation": "fruit_pop" },
      { "id": 9, "name": "Radiant Tree", "threshold": 2000, "animation": "halo_glow" },
      { "id": 10, "name": "Spirit Tree", "threshold": 2500, "animation": "pulse_soft" }
    ],
    "daily_points_to_growth": 100,
    "animation_speed": "normal",
    "scaling_factor": 1.02
  }
}
```

---

### 5. API ch√≠nh

| Endpoint | Ch·ª©c nƒÉng | Ghi ch√∫ |
|-----------|------------|---------|
| `POST /v1/events/ingest` | Nh·∫≠n event u·ªëng n∆∞·ªõc, b∆∞·ªõc ch√¢n, c·∫£m x√∫c... | t·ª´ app |
| `POST /v1/points/award` | Ch·∫•m ƒëi·ªÉm n·ªôi b·ªô (idempotent) | engine n·ªôi b·ªô |
| `GET /v1/tree/state` | L·∫•y c·∫•p c√¢y, E_day, streak | d√πng cho UI |
| `GET /v1/rewards/catalog` | Danh s√°ch qu√† ƒë·ªïi | t√°ch service |
| `POST /v1/rewards/redeem` | ƒê·ªïi qu√† | ghi ledger debit |
| `GET /v1/seeding/next_goal` | G·ª£i √Ω m·ªëc k·∫ø ti·∫øp | dopamine nudge |

---

### 6. ƒê·ªìng b·ªô d·ªØ li·ªáu & b·∫£o m·∫≠t
- Service-to-service: mTLS.  
- JWT user token (scope: health_log, mission, redeem).  
- Rate-limit 100 event/ng√†y.  
- M·ªçi thay ƒë·ªïi l∆∞u trace_id: event ‚Üí ledger ‚Üí tree_state.

---

### 7. L·ªô tr√¨nh ph√°t tri·ªÉn
- **P1:** Free + Premium nhi·ªám v·ª• c∆° b·∫£n.  
- **P2:** Family Forest (c√¢y nh√≥m).  
- **P3:** Partner Rewards + CSR Tree Challenge.  
- **P4:** Gamified events + Voice Anora.  
- **P5:** On-chain proof / SBT milestone (Soul-bound token).  

---

### 8. K·∫øt lu·∫≠n

Life Tree l√† **s·ª± k·∫øt h·ª£p gi·ªØa s·ª©c kh·ªèe ‚Äì c·∫£m x√∫c ‚Äì tr√≤ ch∆°i ‚Äì c·ªông ƒë·ªìng.**  
N√≥ t·∫°o ra ƒë·ªông l·ª±c l√†nh m·∫°nh gi√∫p ng∆∞·ªùi b·ªánh v√† ng∆∞·ªùi th√¢n **mu·ªën quay l·∫°i m·ªói ng√†y**, ƒë·ªìng th·ªùi m·ªü ra m·ªôt n·ªÅn kinh t·∫ø qu√† t·∫∑ng s·ª©c kh·ªèe m√† doanh nghi·ªáp c√≥ th·ªÉ c√πng tham gia.

---

